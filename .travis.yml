language: node_js

os:
  - linux
  
dotnet: 5.0

mono: none

node_js:
  - "20.10.0"


dist: focal
services:
      - mysql
env:
  - CXX=g++-4.8
before_install:
  - npm install -g grunt-cli
install:
 - wget https://download.visualstudio.microsoft.com/download/pr/ILe3eqRCs0xdF-rVJD9CtIb74hzxtn4woNcxU8XM-GU/7bf8a9fcca4187b3f8134e7c59c8002a/dotnet-sdk-5.0.301-linux-x64.tar.gz -O dotnet.tar.gz
  - mkdir -p $HOME/dotnet
  - tar zxf dotnet.tar.gz -C $HOME/dotnet
  - export DOTNET_ROOT=$HOME/dotnet
  - export PATH=$PATH:$HOME/dotnet
  - npm install -q

before_script:
  - mysql -e "create database IF NOT EXISTS test;" -uroot
  - npm install -g grunt-cli
  - npm install -g bower
  - bower install ./client/bower.json

script:
  - dotnet restore
  - dotnet build
  - EDGE_USE_CORECLR=1 npm test
